var Tawk_API=Tawk_API||{},Tawk_LoadStart=new Date,EzCa_API=EzCa_API||function(){function et(n,t,i,r){var u=new XMLHttpRequest;u.open(t,n);t==="POST"&&u.setRequestHeader("Content-Type","application/json;charset=UTF-8");i?u.send(JSON.stringify(i)):u.send();u.responseType="json";u.onload=function(){typeof r=="function"&&r(this.response)};u.onerror=function(){}}function wt(n,t){et(n,"GET",null,t)}function w(){var r=document.getElementById("ezcaScript"),t,i;if(r)n.scriptSrc=r.src;else{t=document.getElementsByTagName("script");for(i in t)t[i].src&&t[i].src.includes("cdn.ezca.asia/js/sdk.js?id=")&&(n.scriptSrc=t[i].src)}return e("id",n.scriptSrc)}function s(){var t=v.getItem(n.uidKey);return t?n.newVisitor||(n.newVisitor=0):(t=u(12),v.setItem(n.uidKey,t),n.newVisitor=1),i.setItem(n.newVisitorKey,n.newVisitor),t}function b(){var t=i.getItem(n.sidKey);return t||(t=u(8),i.setItem(n.sidKey,t)),t}function bt(n){var t=["_t="+(new Date).getTime()];for(var i in n)t.push(encodeURIComponent(i)+"="+encodeURIComponent(n[i]));return t.join("&")}function e(n,t){try{var t=new URL(t?t:document.location.toString()),i=t.searchParams.get(n);return i?i:""}catch(r){return console.log("Error GetParam",r),""}}function ot(t,r){var u=0;r?(u=i.getItem(t),u||(u=0)):i.setItem(t,u);setInterval(function(){nt(n.actKey)?u++:u=0;i.setItem(t,u);c(t==n.tipKey?"timeOnPage":"timeOnSession",u)},1e3)}function kt(n){var t=i.getItem(n);t||(t=0);t++;i.setItem(n,t);c("pageview",t)}function k(t){if(!isNaN(t)){n.pId=t;var i=st();i.includes(t)||i.push(parseInt(t));v.setItem(n.recentIdsKey,JSON.stringify(i))}}function st(){var t=v.getItem(n.recentIdsKey);return t?JSON.parse(t):[]}function dt(){kt(n.pisKey);gt()}function gt(){var u,f,t,r;if(n.productViewLog=null,n.isECommerce)if(n.isWooCommerce){if(u=document.querySelector("link[rel=shortlink]"),!u){i.setItem(n.pvidKey,document.location.pathname);return}if(t=e("p",u.href),!t){i.setItem(n.pvidKey,document.location.pathname);return}if(n.currentPId=t,r=i.getItem(n.pvidKey),r==t)return;f=document.querySelector("form.variations_form.cart");f&&(n.productViewLog={webId:n.wid,prevId:r,nextId:t},k(t));i.setItem(n.pvidKey,t)}else if(n.isHaravan){if(t=meta.page.resourceId,!t){i.setItem(n.pvidKey,document.location.pathname);return}if(n.currentPId=t,r=i.getItem(n.pvidKey),r==t)return;meta.page.pageType.includes("product")&&(n.productViewLog={webId:n.wid,prevId:r,nextId:t},k(t));i.setItem(n.pvidKey,t)}else if(n.isSapo){if(Bizweb.template!="product"){i.setItem(n.pvidKey,document.location.pathname);return}if(t=meta.product.id,n.currentPId=t,r=i.getItem(n.pvidKey),r==t)return;Bizweb.template.includes("product")&&(n.productViewLog={webId:n.wid,prevId:r,nextId:t},k(t));i.setItem(n.pvidKey,t)}}function d(){var u=JSON.parse(i.getItem("__ezca_utm")),r=document.referrer?new URL(document.referrer).hostname:"",t;return new URL(document.location).hostname==r&&(r=""),t={dl:encodeURIComponent(document.location.toString()),dt:encodeURIComponent(document.title),dp:encodeURIComponent(document.location.pathname),dh:encodeURIComponent(document.location.hostname),w:window.screen.width,h:window.screen.height,fi:n.newVisitor,sid:b(),uid:s(),wid:n.wid,tip:i.getItem(n.tipKey),tis:i.getItem(n.tisKey),pis:i.getItem(n.pisKey),dr:r,cn:e("utm_campaign"),cs:e("utm_source"),cc:e("utm_content"),ck:e("utm_term"),cm:e("utm_medium"),gclid:e("gclid")},t.tip=t.tip?t.tip:0,t.tis=t.tis?t.tis:0,t.pis=t.pis?t.pis:0,t}function ht(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toUTCString();document.cookie=n+"="+t+";"+u+";path=/"}function nt(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""}function ni(n){var t=btoa(JSON.stringify(n));return t=t.replace(/=+$/,""),t=t.replace(/\+/g,"-"),t.replace(/\//g,"_")}function ii(t){g("https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.1/socket.io.min.js","socket-io").then(()=>{var e={dh:window.location.hostname,wid:n.wid,uid:s(),pid:t},o=ni(e);r=io(n.wssUrl,{upgrade:!1,transports:["websocket"],query:`token=${o}`,reconnectionAttempts:3});let u=[];typeof rrwebRecord=="function";a.sendEvent=function(t){try{var f;if(t==="ping"){if(nt(n.actKey))r.disconnected&&r.connect();else{b()&&i.removeItem(n.sidKey);r.connected&&r.close();return}f={wid:n.wid,uid:s(),id:b(),dur:10,evt:JSON.stringify(u)};u=[]}else t==="pageview"&&(f=d(),f.nev=f.fi,n.productViewLog&&(n.productViewLog.prevId+="",n.productViewLog.nextId+="",f.pvl=n.productViewLog,f.pid=n.pId));f.t=t;r.emit("event",f)}catch(e){console.error(e)}};r.on("connect",()=>{if(n.connectCount!=0){var t=d();t.t="reconnect";r.emit("event",t)}n.connectCount++});r.on("disconnect",()=>{});r.on("message",n=>{f.isProd()||console.log("message",n)});r.on(window.location.hostname,()=>{});if(t>0)r.on(t,n=>{vi(n.count)});a.sendEvent("pageview")}).catch(()=>console.error("Something went wrong."))}function t(n,t){return n+":"+t+"!important;"}function ri(n,t){var i=document.createElement("style");i.id="ezca-"+(t?t:u(8));i.innerHTML=n;document.head.appendChild(i)}function ui(n){var t=n.identity.replace("tawk.to/chat","embed.tawk.to");Tawk_API.onChatMaximized=function(){console.log("onChatMaximized");o("EzCa TawkTo","TawkTo Click")};Tawk_API.onChatStarted=function(){console.log("onChatStarted");o("EzCa TawkTo","TawkTo ChatStarted")};Tawk_API.onChatEnded=function(){console.log("onChatEnded");o("EzCa TawkTo","TawkTo ChatEnded")};Tawk_API.onPrechatSubmit=function(n){console.log("onPrechatSubmit",n);o("EzCa TawkTo","TawkTo PrechatSubmit")};Tawk_API.onOfflineSubmit=function(n){console.log("onOfflineSubmit",n);o("EzCa TawkTo","TawkTo OfflineSubmit")};tt(document,"script","ezca-tawkto-sdk",t);console.log("initTawkTo success")}function fi(i){var r=document.getElementById("ezca-btn-fb"),e,f;r||(r=document.createElement("div"),r.id="ezca-btn-fb",e=t("width","60px")+t("height","60px")+t("border-radius","50%")+t("padding","6px")+t("cursor","pointer")+t("position","fixed")+t("bottom",n.mobile?"20px":"24px")+t("right",n.mobile?"20px":"24px")+t("z-index",ft)+t("background","#0A7CFF")+t("box-shadow","rgb(0 0 0 / 15%) 0px 4px 12px 0px")+"",r.style=e,document.body.appendChild(r),f=document.createElement("style"),f.id="ezca-"+u(8),f.innerHTML="#ezca-btn-fb svg path:nth-child(1){fill:#fff!important} #ezca-btn-fb svg path:nth-child(2){fill:#0A7CFF!important}",document.head.appendChild(f),r.innerHTML+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M24,4C13.5,4,5,12.1,5,22c0,5.2,2.3,9.8,6,13.1V44l7.8-4.7c1.6,0.4,3.4,0.7,5.2,0.7c10.5,0,19-8.1,19-18C43,12.1,34.5,4,24,4z"><\/path><path d="M12 28L22 17 27 22 36 17 26 28 21 23z"><\/path><\/svg>',h(r,"click",()=>{var n="https://m.me/"+i.identity.replace("https://m.me/","")+"?ref="+s();window.open(n);o("EzCa Zalo","Zalo Click")}));return}function ei(i,r){var f=document.getElementById("ezca-btn-zalo"),c,e;f||(f=document.createElement("div"),f.id="ezca-btn-zalo",c=t("width","60px")+t("height","60px")+t("border-radius","50%")+t("padding","8px")+t("cursor","pointer")+t("position","fixed")+t("bottom",n.mobile?"20px":"24px")+t(r?"left":"right",n.mobile?"20px":"24px")+t("z-index",ft)+t("background","#0573ff")+t("box-shadow","rgb(0 0 0 / 15%) 0px 4px 12px 0px")+"",f.style=c,document.body.appendChild(f),e=document.createElement("style"),e.id="ezca-"+u(8),e.innerHTML="#ezca-btn-zalo svg path{fill:#fff!important}",document.head.appendChild(e),f.innerHTML+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"><path d="M 9 4 C 6.2504839 4 4 6.2504839 4 9 L 4 41 C 4 43.749516 6.2504839 46 9 46 L 41 46 C 43.749516 46 46 43.749516 46 41 L 46 9 C 46 6.2504839 43.749516 4 41 4 L 9 4 z M 9 6 L 15.580078 6 C 12.00899 9.7156859 10 14.518083 10 19.5 C 10 24.66 12.110156 29.599844 15.910156 33.339844 C 16.030156 33.549844 16.129922 34.579531 15.669922 35.769531 C 15.379922 36.519531 14.799687 37.499141 13.679688 37.869141 C 13.249688 38.009141 12.97 38.430859 13 38.880859 C 13.03 39.330859 13.360781 39.710781 13.800781 39.800781 C 16.670781 40.370781 18.529297 39.510078 20.029297 38.830078 C 21.379297 38.210078 22.270625 37.789609 23.640625 38.349609 C 26.440625 39.439609 29.42 40 32.5 40 C 36.593685 40 40.531459 39.000731 44 37.113281 L 44 41 C 44 42.668484 42.668484 44 41 44 L 9 44 C 7.3315161 44 6 42.668484 6 41 L 6 9 C 6 7.3315161 7.3315161 6 9 6 z M 33 15 C 33.55 15 34 15.45 34 16 L 34 25 C 34 25.55 33.55 26 33 26 C 32.45 26 32 25.55 32 25 L 32 16 C 32 15.45 32.45 15 33 15 z M 18 16 L 23 16 C 23.36 16 23.700859 16.199531 23.880859 16.519531 C 24.050859 16.829531 24.039609 17.219297 23.849609 17.529297 L 19.800781 24 L 23 24 C 23.55 24 24 24.45 24 25 C 24 25.55 23.55 26 23 26 L 18 26 C 17.64 26 17.299141 25.800469 17.119141 25.480469 C 16.949141 25.170469 16.960391 24.780703 17.150391 24.470703 L 21.199219 18 L 18 18 C 17.45 18 17 17.55 17 17 C 17 16.45 17.45 16 18 16 z M 27.5 19 C 28.11 19 28.679453 19.169219 29.189453 19.449219 C 29.369453 19.189219 29.65 19 30 19 C 30.55 19 31 19.45 31 20 L 31 25 C 31 25.55 30.55 26 30 26 C 29.65 26 29.369453 25.810781 29.189453 25.550781 C 28.679453 25.830781 28.11 26 27.5 26 C 25.57 26 24 24.43 24 22.5 C 24 20.57 25.57 19 27.5 19 z M 38.5 19 C 40.43 19 42 20.57 42 22.5 C 42 24.43 40.43 26 38.5 26 C 36.57 26 35 24.43 35 22.5 C 35 20.57 36.57 19 38.5 19 z M 27.5 21 C 27.39625 21 27.29502 21.011309 27.197266 21.03125 C 27.001758 21.071133 26.819727 21.148164 26.660156 21.255859 C 26.500586 21.363555 26.363555 21.500586 26.255859 21.660156 C 26.148164 21.819727 26.071133 22.001758 26.03125 22.197266 C 26.011309 22.29502 26 22.39625 26 22.5 C 26 22.60375 26.011309 22.70498 26.03125 22.802734 C 26.051191 22.900488 26.079297 22.994219 26.117188 23.083984 C 26.155078 23.17375 26.202012 23.260059 26.255859 23.339844 C 26.309707 23.419629 26.371641 23.492734 26.439453 23.560547 C 26.507266 23.628359 26.580371 23.690293 26.660156 23.744141 C 26.819727 23.851836 27.001758 23.928867 27.197266 23.96875 C 27.29502 23.988691 27.39625 24 27.5 24 C 27.60375 24 27.70498 23.988691 27.802734 23.96875 C 28.487012 23.82916 29 23.22625 29 22.5 C 29 21.67 28.33 21 27.5 21 z M 38.5 21 C 38.39625 21 38.29502 21.011309 38.197266 21.03125 C 38.099512 21.051191 38.005781 21.079297 37.916016 21.117188 C 37.82625 21.155078 37.739941 21.202012 37.660156 21.255859 C 37.580371 21.309707 37.507266 21.371641 37.439453 21.439453 C 37.303828 21.575078 37.192969 21.736484 37.117188 21.916016 C 37.079297 22.005781 37.051191 22.099512 37.03125 22.197266 C 37.011309 22.29502 37 22.39625 37 22.5 C 37 22.60375 37.011309 22.70498 37.03125 22.802734 C 37.051191 22.900488 37.079297 22.994219 37.117188 23.083984 C 37.155078 23.17375 37.202012 23.260059 37.255859 23.339844 C 37.309707 23.419629 37.371641 23.492734 37.439453 23.560547 C 37.507266 23.628359 37.580371 23.690293 37.660156 23.744141 C 37.739941 23.797988 37.82625 23.844922 37.916016 23.882812 C 38.005781 23.920703 38.099512 23.948809 38.197266 23.96875 C 38.29502 23.988691 38.39625 24 38.5 24 C 38.60375 24 38.70498 23.988691 38.802734 23.96875 C 39.487012 23.82916 40 23.22625 40 22.5 C 40 21.67 39.33 21 38.5 21 z"><\/path><\/svg>',h(f,"click",()=>{var n="https://zalo.me/"+i.identity.replace("https://zalo.me/","")+"?ref="+s();window.open(n);o("EzCa Zalo","Zalo Click")}),setTimeout(()=>{if(document.getElementsByClassName("fb-customerchat")){var t=document.querySelector(".fb_dialog_content iframe");if(!t)return;t.style.right.includes("px")&&(ut(f.id),setTimeout(()=>{f.style.right="",f.style.left=n.mobile?"20px":"24px",rt(f.id)},600))}},5e3));return}function tt(n,t,i,r){var u,f=n.getElementsByTagName(t)[0];n.getElementById(i)||(u=n.createElement(t),u.id=i,u.src=r,i==="ezca-tawkto-sdk"&&(u.async=!0,u.charset="UTF-8",u.setAttribute("crossorigin","*")),f.parentNode.insertBefore(u,f))}function ct(n,t){return Array.prototype.slice.call(document.getElementsByTagName(t)).filter(t=>t.textContent.trim()===n.trim())}function oi(n){return document.evaluate(n,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}function lt(n,t){n.parentNode.insertBefore(t,n.nextSibling)}function si(n,t){n.parentNode.insertBefore(t,n)}function h(n,t,i){n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent&&n.attachEvent("on"+t,i)}function hi(){var n=document.documentElement,t=document.body,i="scrollTop",r="scrollHeight";return(n[i]||t[i])/((n[r]||t[r])-n.clientHeight)*100}function ci(){n.data.integrationss&&n.data.integrationss.forEach(t=>{switch(t.type){case 2:fi(t);break;case 3:ui(t);break;case 4:ei(t,n.data.integrationss.findIndex(n=>n.type==2)!=-1)}})}function at(){var u,s,i,h,c;if(n.data.recommender&&n.data.recommender.active){var f=n.data.recommender,e=f.xPath.split("|"),r="",o=!1;for(u=0;u<e.length;u++)if(r=e[u].includes("/html/body")?oi(e[u]):null,r){o=!0;break}if(!o){it<10&&(it++,setTimeout(function(){at()},1e3));return}(s=["home","product","article"],!n.isHaravan||s.includes(meta.page.pageType))&&(i=document.createElement("iframe"),i.id=n.recommId,h={webId:n.wid,dh:document.location.hostname,currentId:n.currentPId?n.currentPId+"":document.location.pathname,recent:st(),productId:n.pId?n.pId:0},i.src=n.engageUrl+"/recommender/"+encodeURIComponent(JSON.stringify(h)),c=t("width","100%")+t("border","0"),i.style=c,f.insert==="after"?lt(r,i):f.insert==="before"?si(r,i):r.appendChild(i))}}function li(t){var i,r;if(!t){i=document.getElementById("ezca-product-reviews");i&&i.remove();return}r=".ezca-reviews-badge{display:flex!important;justify-content:center!important;margin:4px 0!important;}.ezca-reviews-badge div{width:20px!important;height:20px!important;}.ezca-reviews-badge span{line-height:20px!important;margin-left:6px!important;}.ezca-star{background:url(https://cdn.ezca.asia/img/star.svg)no-repeat center center!important;}.ezca-star-half{background:url(https://cdn.ezca.asia/img/star-half.svg)no-repeat center center!important;}.ezca-star-empty{background:url(https://cdn.ezca.asia/img/star-empty.svg)no-repeat center center!important;}";ri(r,"product-reviews-style");n.isHaravan&&meta.product&&vt()}function vt(){var t=document.getElementById("ezca-product-reviews"),i;if(!t){setTimeout(vt,5e3);return}t.tagName=="DIV"&&(i=`${n.apiUrl}/api/ProductReview/InitProductReview/${n.wid}/${meta.product.id}`,fetch(i,{method:"POST"}).then(n=>n.json()).then(()=>{}))}function ai(){var i,r,u,f;n.data.socialProof&&(i=n.data.socialProof,i.position=n.mobile?i.mobilePosition:i.desktopPosition,r=document.createElement("iframe"),r.id=n.socialProofId,u={webId:n.wid,dh:document.location.hostname,id:r.id,displayTime:i.displayTime,waitTime:i.waitTime},r.src=n.engageUrl+"/social-proof/"+encodeURIComponent(JSON.stringify(u)),f=t("width",n.mobile?"calc(100% - 16px)":"400px")+t("position","fixed")+t(i.position.includes("right")?"right":"left",n.mobile?"8px":"16px")+t(i.position.includes("bottom")?"bottom":"top","-200px")+t("z-index","2147483647")+t("transition","all 600ms")+t("border","0"),r.style=f,setTimeout(()=>{document.body.appendChild(r)},i.startDelayTime*1e3))}function vi(i){var u,r,f;if(n.data.socialProof&&n.data.socialProof.boostViewingActive&&(i+=Math.floor(Math.random()*n.data.socialProof.boostViewing)-1,!(i<=0))&&(u=ct(meta.product.title,"h1"),u.length==0&&ct(meta.product.title,"div"),u.length>0)){if(r=document.getElementById("ezca-viewing"),r){if(f=r.getAttribute("x-count"),i<=parseInt(f))return}else r=document.createElement("div"),r.id="ezca-viewing",r.setAttribute("x-count",i),styles=t("font-size","14px")+t("padding","8px")+t("margin-bottom","8px")+t("border","1px solid #ccc")+t("border-radius","8px")+t("width","fit-content")+"",r.style=styles;r.innerHTML=`<img src="https://cdn.ezca.asia/img/users.svg" style="width: 24px;margin-right: 4px;" />
                                 <b>Bạn</b> và <b>${i}</b> người khác đang xem sản phẩm này`;lt(u[0],r)}}function c(t,i){if(n.logicData[t]=i,typeof jsonLogic=="object")try{yt(t,"popup");yt(t,"wheel-fortune")}catch(r){console.log("Error in setLogicData: ",r)}}function yt(t,i){var f=i=="popup"?n.data.forms:n.data.wheelFortunes,e,s,o,c,l;if(f&&f.length!=0&&n.isActiveTab){e=f.filter(t=>!n.popupOpens.includes(t.id));for(s in e){var u=e[s],h=`${i}_${u.id}`,r=sessionStorage.getItem(h);r=r?parseInt(r):0;o=JSON.parse(u.jsonLogic);o.data.hasOwnProperty(t)&&typeof jsonLogic.apply=="function"&&(n.logicData.countShow=r,c=jsonLogic.apply(o.logic,n.logicData),l=nt("hide_"+u.id),c&&!l&&(r++,sessionStorage.setItem(h,r),n.popupOpens.push(u.id),pi(u,i)))}}}function yi(){var i,t;h(document,"mouseout",function(n){n=n?n:window.event;var t=n.relatedTarget||n.toElement;t&&t.nodeName!="HTML"||c("exitPage",!0)});h(window,"scroll",function(){i&&clearTimeout(i);i=setTimeout(()=>{c("scrollPage",hi())},300)});t=document.createElement("style");t.id="ezcaPopupCustomCss";t.innerHTML=".ezca-popup-ontop{top:0!important;}";document.head.appendChild(t);h(window,"resize",function(){var i,t;if(n.mobile&&y.width==window.innerWidth)if(y.height>window.innerHeight)for(i=document.getElementsByClassName("ezca-popup"),t=0;t<i.length;t++)i[t].classList.add("ezca-popup-ontop");else for(i=document.getElementsByClassName("ezca-popup"),t=0;t<i.length;t++)i[t].classList.remove("ezca-popup-ontop");y.width=window.innerWidth;y.height=window.innerHeight});h(document,"visibilitychange",function(){n.isActiveTab=document.visibilityState==="visible"})}function pi(i,r){var e=i.id,o,c,f,u,s;return document.getElementById(e)?(console.log("exists popup",e),!1):(o=n.data.device==1,c=[3],c.includes(i.type)||r=="wheel-fortune"?(f=document.createElement("div"),f.id="wrap_"+e,s=t("width","100%")+t("height","100%")+t("position","fixed")+t("top","0")+t("left","0")+t("background","#00000080")+t("display","flex")+t("justify-content","center")+t("align-items","center")+t("visibility","hidden")+t("z-index","2147483647")+"",f.style=s,f.setAttribute("x-display","flex"),document.body.appendChild(f),u=document.createElement("iframe"),u.id=e,u.src=`${n.engageUrl}/${r}/${e}`,s=t("width","100%")+t("max-width",o?"100%":"1024px")+t("max-height",o?"100%":"1024px")+t("border","0"),u.style=s,document.getElementById(f.id).appendChild(u),setTimeout(()=>{rt(f.id)},1e3),h(f,"click",function(){ut(f.id)})):(u=document.createElement("iframe"),u.id=e,u.className="ezca-popup",u.src=`${n.engageUrl}/${r}/${e}`,s=t("width",o?"100%":"480px")+t("position","fixed")+t("bottom",o?"0":"16px")+t("right",o?"0":"16px")+t("visibility","hidden")+t("z-index","2147483647")+t("border","0"),u.style=s,document.body.appendChild(u),setTimeout(()=>{rt(e)},1e3)),!0)}function wi(){g(n.cdnUrl+"/js/logic.js","logic").then(()=>{yi(),c("url",document.location.href),c("referrer",document.referrer)})}function o(t,i,u){var f,e;u=u?u:"";f=d();f.t="interactive";f.ec=t;f.ea=i;f.el=u;n.data.integrationss&&(e=n.data.integrationss.find(n=>n.type===1&&n.active),e&&(f.tid=e.identity));!n.preview&&r&&r.emit("event",f)}function rt(n){var t=document.getElementById("wrap_"+n);t||(t=document.getElementById(n));t&&bi(t)}function ut(n){var t=document.getElementById("wrap_"+n);t||(t=document.getElementById(n));t&&ki(t);ht("hide_"+n,!0,1/288)}function bi(n,t){if(n)if(t=t?t:300,n.style.opacity=0,n.style.filter="alpha(opacity=0)",n.style.display=n.getAttribute("x-display")?n.getAttribute("x-display"):"block",n.style.visibility="visible",t)var i=0,r=setInterval(function(){i+=50/t;i>=1&&(clearInterval(r),i=1);n.style.opacity=i;n.style.filter="alpha(opacity="+i*100+")"},50);else n.style.opacity=1,n.style.filter="alpha(opacity=1)"}function ki(n,t){if(n)if(t=t?t:300,t)var i=1,r=setInterval(function(){i-=50/t;i<=0&&(clearInterval(r),i=0,n.style.display="none",n.style.visibility="hidden");n.style.opacity=i;n.style.filter="alpha(opacity="+i*100+")"},50);else n.style.opacity=0,n.style.filter="alpha(opacity=0)",n.style.display="none",n.style.visibility="hidden"}function di(){function i(t,i,r){var u=document.getElementById(t);u&&u.contentWindow.postMessage({type:r,key:"setData",value:i},n.engageUrl)}function r(n,t){var i=document.getElementById(n);i&&(i.style.height=t+"px")}function f(){var i=t("z-index","2147483647")+t("position","fixed")+t("border","0"),r=n.data.menu.menuTemplates.find(t=>t.device===n.data.device),f;["top","right","bottom","left"].forEach(n=>{i+=r.position.includes(n)?t(n,"0"):""});r.position.includes("middle")&&(i+=t("top","50%"),i+=t("transform","translateY(-50%)"));var u=r.position.includes("center");return u&&(i+=t("right","50%"),i+=t("transform","translateX(50%)")),f=56*n.data.menu.menuButtons.length+16,i+=t("width",u?"100%":"64px")+t("height",(u?"60":f)+"px")}function e(){var t,i;(n.data.menu&&n.data.menu.active||n.preview)&&(t=document.getElementById(n.rootId),t&&t.remove(),t=document.createElement("div"),t.id=n.rootId,i=document.createElement("iframe"),i.id=n.menuId,i.src=n.engageUrl+"/menu",i.style=f(),t.appendChild(i),document.body.appendChild(t))}if(window.addEventListener("message",t=>{var u,p,b,a,v,k,y,c,d,g,l,h;try{if(u=t.data,p={uid:s(),wid:w(),location:document.location.toString(),dh:document.location.hostname,isMobile:n&&n.data&&n.data.device==1},u.type=="popup"||u.type=="form"||u.type=="wheel-fortune"){b=u.type=="wheel-fortune";switch(u.key){case"getData":if(a=b?n.data.wheelFortunes:n.data.forms,!a||a.length==0)return;v=a.find(n=>n.id==u.value.id);v.parent=p;i(v.id,v,u.type);break;case"updateHeight":k=n.data.device==1;y=Math.min(screen.height,u.value.height);b&&k&&(y=screen.height);r(u.value.id,y);k&&(c=document.getElementById(u.value.id),c&&(c.style.top=(screen.height-y)/2+"px"));break;case"close":ut(u.value.id)}}else if(u.type=="product-reviews")switch(u.key){case"updateHeight":r("ezca-product-reviews",u.value.height);break;default:console.log(u)}else if(u.type=="recommender")switch(u.key){case"updateHeight":r(n.recommId,u.value.height);break;default:console.log(u)}else if(u.type=="social-proof"){c=document.getElementById(u.value.id);switch(u.key){case"updateHeight":r(n.socialProofId,u.value.height);break;case"close":d="-200px";n.data.socialProof.position.includes("bottom")?c.style.bottom=d:c.style.top=d;break;case"open":h=u.value.item;n.isHaravan?(h.link=`${window.location.origin}/products/${h.link}`,i(n.socialProofId,h,u.type)):n.isSapo&&(h.link=`${window.location.origin}/${h.link}`,i(n.socialProofId,h,u.type));setTimeout(function(){var t=n.mobile?"8px":"16px";n.data.socialProof.position.includes("bottom")?c.style.bottom=t:c.style.top=t},600);break;case"goto":window.location.replace(window.location.origin+u.value.link);break;default:console.log(u)}}else{u.type="menu";switch(u.key){case"getData":l=n.data.menu;l.parent=p;i(n.menuId,l,u.type);break;case"setDataFromApp":n.data||(n.data={});g=u.value;n.data.menu=u.value;n.data.device=g.parent.isMobile?1:2;document.getElementById(n.menuId)?(l=document.getElementById(n.menuId),l.style=f()):e();i(n.menuId,g,u.type);break;case"click":h=u.value;o("EzCa Menu",h.eventName,n.data.device==1?h.shortName:h.name);h.action===1?window.open(h.actionValue):h.action===1?window.open(h.actionValue,"_blank"):eval(h.actionValue)}}}catch(nt){console.log("Error in receive message: ",nt)}}),!n.preview){var u=`${n.apiUrl}/api/public/website/${n.wid}`;n.isHaravan&&meta.product&&(u+="?productId="+meta.product.id);fetch(u).then(n=>n.json()).then(t=>{t.success&&(t.data.isCollect&&ii(u.includes("productId")?meta.product.id:0),n.data=t.data,n.mobile=n.data.device==1,e(),ci(),at(),ai(),li(n.data.productReviews),(n.data.forms&&n.data.forms.length>0||n.data.wheelFortunes&&n.data.wheelFortunes.length>0)&&wi())})}}var a={v:"2022.02.24.01"},ft=2147483647,i=sessionStorage,v=localStorage,u=n=>{let t="",i=crypto.getRandomValues(new Uint8Array(n));for(;n--;){let r=63&i[n];t+=r<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r<63?"_":"-"}return t},y={width:window.innerWidth,height:window.innerHeight},p=["hcm.clickbuy.com.vn","aegoal.vip"].indexOf(window.location.hostname),f={isDev:function(){return!n.scriptSrc.includes("cdn")},isProd:function(){return n.scriptSrc.includes("https://cdn")},isBeta:function(){return n.scriptSrc.includes("https://betacdn")}},n={uidKey:"__ezca_uid",newVisitorKey:"__ezca_new_visitor",sidKey:"__ezca_sid",tipKey:"__ezca_tip",tisKey:"__ezca_tis",pisKey:"__ezca_pis",actKey:"__ezca_activity",pvidKey:"__ezca_pvid",recentIdsKey:"__ezca_recent_ids",connectCount:0,productViewLog:null,currentPId:encodeURIComponent(window.location.pathname),logicData:{url:document.location.href,referrer:document.referrer},popupOpens:[],isActiveTab:!0},g,r,it,l,pt;n.isHaravan=typeof Haravan!="undefined";n.isSapo=typeof Bizweb!="undefined";n.isWooCommerce=document.querySelector("body.woocommerce");n.isECommerce=n.isHaravan||n.isSapo||n.isWooCommerce;n.wid=p!==-1?["608d68eb7705b34466a0065a","60706cee0b4526b552264cf5"][p]:w()?w():document.location.hostname;n.apiUrl=f.isProd()?"https://api.ezca.asia":f.isBeta()?"https://betaapi.ezca.asia":"https://localhost:44341";n.wssUrl=f.isProd()?"https://wss.ezca.asia":f.isBeta()?"https://wss.ezca.asia":"http://localhost:8000";n.cdnUrl=f.isProd()?"https://cdn.ezca.asia":f.isBeta()?"https://betacdn.ezca.asia":"http://cors.com";n.engageUrl=f.isProd()?"https://engage.ezca.asia":f.isBeta()?"https://betaengage.ezca.asia":"http://localhost:3001";n.preview=window.location.origin===n.engageUrl;n.rootId=n.preview?"ezca-root":u(16);n.menuId=n.preview?"ezca-menu":u(16);n.recommId=n.preview?"ezca-recommender":u(16);n.socialProofId=n.preview?"ezca-social-proof":u(16);g=(n,t)=>{if(t="ezca-"+t,!document.getElementById(t))return new Promise((i,r)=>{const u=document.createElement("script");u.type="text/javascript";u.onload=i;u.onerror=r;u.src=n;u.id=t;document.head.append(u)})};it=0;try{if(l=e("ezcaVerifyInstall"),l&&console.log("Start VerifyInstall"),window.opener&&n.wid==l){pt=n.apiUrl+"/api/public/VerifyInstall?"+bt({id:l,url:document.location.origin});wt(pt,function(){l&&console.log("VerifyInstall Success")});return}console.log(`EzCa SDK is installed with ${n.wid}, v${a.v}.`);n.preview||(document.addEventListener("mousemove",function(){ht(n.actKey,"true",1/48)}),ot(n.tipKey,!1),ot(n.tisKey,!0),dt());p==-1&&di()}catch(gi){console.error(gi)}return a}();